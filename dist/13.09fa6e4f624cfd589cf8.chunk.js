webpackJsonp([13],{Y8yf:function(n,l,e){"use strict";function t(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),L["\u0275ted"](null,["You: "]))],null,null)}function i(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,34,"md-list-item",[["class","u-clickable mat-list-item"],["md-ripple",""],["role","listitem"]],[[2,"u-highlight",null]],[[null,"focus"],[null,"blur"],[null,"click"]],function(n,l,e){var t=!0;if("focus"===l){t=!1!==L["\u0275nov"](n,3)._handleFocus()&&t}if("blur"===l){t=!1!==L["\u0275nov"](n,3)._handleBlur()&&t}if("click"===l){t=!1!==L["\u0275nov"](n,6).onClick()&&t}return t},S.O,S.q)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](1097728,null,2,V._47,[L.Renderer2,L.ElementRef,[2,V._42],[2,V._56]],null,null),L["\u0275qud"](603979776,1,{_lines:1}),L["\u0275qud"](335544320,2,{_hasAvatar:0}),L["\u0275did"](16384,null,0,A.m,[A.l,A.a,[8,null],L.Renderer2,L.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),L["\u0275ted"](2,["\n\n          "])),(n()(),L["\u0275eld"](0,null,0,2,"vmo-avatar",[["class","mat-list-avatar"],["md-list-avatar",""]],null,null,null,N.b,N.a)),L["\u0275did"](16384,[[2,4]],0,V._43,[],null,null),L["\u0275did"](49152,null,0,K.a,[],{membership:[0,"membership"]},null),(n()(),L["\u0275ted"](2,["\n\n          "])),(n()(),L["\u0275eld"](0,null,1,5,"span",[["class","mdc-typography--subheading1 mat-line"],["md-line",""]],[[2,"u-faded",null]],null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,[[1,4]],0,V._40,[],null,null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),L["\u0275pid"](0,q,[]),L["\u0275pid"](0,T,[]),(n()(),L["\u0275ted"](2,["\n\n          "])),(n()(),L["\u0275eld"](0,null,1,6,"span",[["class","mdc-typography--body1 mat-line"],["md-line",""]],[[2,"u-weak",null],[2,"u-faded",null]],null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,[[1,4]],0,V._40,[],null,null),(n()(),L["\u0275ted"](null,["\n            "])),(n()(),L["\u0275and"](16777216,null,null,1,null,t)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),(n()(),L["\u0275ted"](2,["\n\n          "])),(n()(),L["\u0275eld"](0,null,2,1,"span",[["class","u-fill"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](2,["\n\n          "])),(n()(),L["\u0275eld"](0,null,2,3,"span",[["class","mdc-typography--caption u-nowrap"]],[[2,"u-weak",null],[2,"u-faded",null]],null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),L["\u0275pid"](131072,j.TimeAgoPipe,[L.ChangeDetectorRef,L.NgZone]),(n()(),L["\u0275ted"](2,["\n\n        "]))],function(n,l){var e=l.component;n(l,1,0,"u-clickable"),n(l,6,0,l.context.$implicit.id),n(l,10,0,l.context.$implicit.participations[0].member);n(l,13,0,"mdc-typography--subheading1");n(l,20,0,"mdc-typography--body1"),n(l,24,0,l.context.$implicit.lastMessage.memberId===e.membership.id);n(l,28,0,"u-fill");n(l,31,0,"mdc-typography--caption u-nowrap")},function(n,l){var e=l.component;n(l,0,0,e.hasUnreadMessages(l.context.$implicit)),n(l,12,0,!l.context.$implicit.group&&l.context.$implicit.participations[0].member.deletedAt),n(l,15,0,L["\u0275unv"](l,15,0,L["\u0275nov"](l,17).transform(L["\u0275unv"](l,15,0,L["\u0275nov"](l,16).transform(l.context.$implicit.participations,e.membership))))),n(l,19,0,!e.hasUnreadMessages(l.context.$implicit),!l.context.$implicit.group&&l.context.$implicit.participations[0].member.deletedAt),n(l,25,0,null==l.context.$implicit.lastMessage?null:l.context.$implicit.lastMessage.body),n(l,30,0,!e.hasUnreadMessages(l.context.$implicit),!l.context.$implicit.group&&l.context.$implicit.participations[0].member.deletedAt),n(l,32,0,L["\u0275unv"](l,32,0,L["\u0275nov"](l,33).transform(l.context.$implicit.lastMessage?l.context.$implicit.lastMessage.sentAt:l.context.$implicit.startedAt)))})}function u(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,9,"md-list",[["class","vmo-list mat-list"],["role","list"]],null,null,null,S.P,S.p)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V._42,[],null,null),L["\u0275did"](16384,null,0,V._44,[],null,null),(n()(),L["\u0275ted"](0,["\n        "])),(n()(),L["\u0275and"](16777216,null,0,2,null,i)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),L["\u0275pid"](0,U,[]),(n()(),L["\u0275ted"](0,["\n      "]))],function(n,l){var e=l.component;n(l,1,0,"vmo-list"),n(l,7,0,L["\u0275unv"](l,7,0,L["\u0275nov"](l,8).transform(e.conversations)))},null)}function o(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,46,"div",[["class","vmo-component"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,14,"vmo-toolbar",[["mode","menu"],["title","Messages"]],null,null,null,z.b,z.a)),L["\u0275did"](245760,null,0,H.a,[Z.a,A.l,A.a,J.a,$.Location,Q.a,Y.a],{title:[0,"title"],mode:[1,"mode"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,10,"button",[["class","mat-icon-button"],["md-icon-button",""],["routerLink","new"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==L["\u0275nov"](n,10).onClick()&&t}return t},S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],null,null),L["\u0275did"](16384,null,0,V._34,[],null,null),L["\u0275did"](16384,null,0,A.m,[A.l,A.a,[8,null],L.Renderer2,L.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["add"])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,26,"vmo-progress-spinner",[],null,null,null,W.b,W.a)),L["\u0275did"](114688,null,0,X.a,[],{hasLoaded:[0,"hasLoaded"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,11,"vmo-empty-state",[],null,null,null,nn.b,nn.a)),L["\u0275did"](49152,null,0,ln.a,[],{title:[0,"title"],description:[1,"description"],when:[2,"when"]},null),L["\u0275pid"](0,U,[]),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,6,"button",[["class","u-push-button mat-raised-button"],["color","accent"],["md-raised-button",""],["routerLink","new"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==L["\u0275nov"](n,31).onClick()&&t}return t},S.D,S.d)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],{color:[0,"color"]},null),L["\u0275did"](16384,null,0,V._75,[],null,null),L["\u0275did"](16384,null,0,A.m,[A.l,A.a,[8,null],L.Renderer2,L.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),L["\u0275ted"](0,["Start a conversation"])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,9,"div",[["class","vmo-scrollable-area"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275and"](16777216,null,null,2,null,u)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),L["\u0275pid"](0,U,[]),(n()(),L["\u0275ted"](null,["\n\n      "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-load-more-button",[],null,null,null,en.b,en.a)),L["\u0275did"](49152,null,0,tn.a,[],{paginator:[0,"paginator"]},null),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n"])),(n()(),L["\u0275ted"](null,["\n\n"])),(n()(),L["\u0275eld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),L["\u0275did"](212992,null,0,A.q,[A.b,L.ViewContainerRef,L.ComponentFactoryResolver,[8,null],L.ChangeDetectorRef],null,null)],function(n,l){var e=l.component;n(l,1,0,"vmo-component");n(l,4,0,"Messages","menu");n(l,10,0,"new"),n(l,14,0),n(l,20,0,!e.loading);var t=null;n(l,23,0,"No conversations, yet.","Send a message to communicate with people from your organization.",!(null==(t=L["\u0275unv"](l,23,2,L["\u0275nov"](l,24).transform(e.conversations)))?null:t.length)&&!e.loading);n(l,27,0,"u-push-button");n(l,29,0,"accent");n(l,31,0,"new");n(l,36,0,"vmo-scrollable-area");var i=null;n(l,39,0,null==(i=L["\u0275unv"](l,39,0,L["\u0275nov"](l,40).transform(e.conversations)))?null:i.length),n(l,43,0,e.conversationListService),n(l,49,0)},function(n,l){n(l,6,0,L["\u0275nov"](l,8).disabled||null),n(l,26,0,L["\u0275nov"](l,29).disabled||null)})}function r(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,2,"ng-component",[],null,null,null,o,vn)),L["\u0275prd"](131584,null,pn,pn,[sn.a,dn.a,rn.a,an.a]),L["\u0275did"](245760,null,0,mn,[pn,dn.a,L.ChangeDetectorRef],null,null)],function(n,l){n(l,2,0)},null)}function a(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,38,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var t=!0,i=n.component;if("submit"===l){t=!1!==L["\u0275nov"](n,2).onSubmit(e)&&t}if("reset"===l){t=!1!==L["\u0275nov"](n,2).onReset()&&t}if("submit"===l){i.onSubmit(L["\u0275nov"](n,21).value),L["\u0275nov"](n,21).value="";t=!1!==e.preventDefault()&&t}return t},null,null)),L["\u0275did"](16384,null,0,wn.s,[],null,null),L["\u0275did"](16384,null,0,wn.m,[[8,null],[8,null]],null,null),L["\u0275prd"](2048,null,wn.c,null,[wn.m]),L["\u0275did"](16384,null,0,wn.l,[wn.c],null,null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,31,"md-toolbar",[["class","mat-toolbar"],["role","toolbar"]],null,null,null,S.Y,S.z)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V._109,[L.Renderer2,L.ElementRef],null,null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,15,"md-input-container",[["class","u-fill mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==L["\u0275nov"](n,13)._control.focus()&&t}return t},S.K,S.l)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](7389184,null,6,V._26,[L.ElementRef,L.ChangeDetectorRef,[2,V.v]],null,null),L["\u0275qud"](335544320,1,{_control:0}),L["\u0275qud"](335544320,2,{_placeholderChild:0}),L["\u0275qud"](603979776,3,{_errorChildren:1}),L["\u0275qud"](603979776,4,{_hintChildren:1}),L["\u0275qud"](603979776,5,{_prefixChildren:1}),L["\u0275qud"](603979776,6,{_suffixChildren:1}),(n()(),L["\u0275ted"](1,["\n      "])),(n()(),L["\u0275eld"](0,[["input",1]],1,3,"input",[["class","mat-input-element"],["mdInput",""],["name","message"],["placeholder","Type message..."]],[[8,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"aria-describedby",0],[1,"aria-invalid",0]],[[null,"blur"],[null,"focus"],[null,"input"]],function(n,l,e){var t=!0;if("blur"===l){t=!1!==L["\u0275nov"](n,23)._focusChanged(!1)&&t}if("focus"===l){t=!1!==L["\u0275nov"](n,23)._focusChanged(!0)&&t}if("input"===l){t=!1!==L["\u0275nov"](n,23)._onInput()&&t}return t},null,null)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](933888,null,0,V._38,[L.ElementRef,L.Renderer2,G.a,[8,null],[2,wn.m],[2,wn.e],[2,V.s]],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),L["\u0275prd"](2048,[[1,4]],V._27,null,[V._38]),(n()(),L["\u0275ted"](1,["\n    "])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,9,"button",[["class","mat-icon-button"],["md-icon-button",""],["type","submit"]],[[8,"disabled",0]],null,null,S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],{disabled:[0,"disabled"]},null),L["\u0275did"](16384,null,0,V._34,[],null,null),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["send"])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n"]))],function(n,l){var e=l.component;n(l,11,0,"u-fill");n(l,23,0,e.disabledInput,"Type message..."),n(l,29,0,!L["\u0275nov"](l,21).value||e.disabledButton),n(l,34,0)},function(n,l){n(l,0,0,L["\u0275nov"](l,4).ngClassUntouched,L["\u0275nov"](l,4).ngClassTouched,L["\u0275nov"](l,4).ngClassPristine,L["\u0275nov"](l,4).ngClassDirty,L["\u0275nov"](l,4).ngClassValid,L["\u0275nov"](l,4).ngClassInvalid,L["\u0275nov"](l,4).ngClassPending),n(l,10,0,L["\u0275nov"](l,13)._control.errorState,L["\u0275nov"](l,13)._control.errorState,L["\u0275nov"](l,13)._control.focused,L["\u0275nov"](l,13)._shouldForward("untouched"),L["\u0275nov"](l,13)._shouldForward("touched"),L["\u0275nov"](l,13)._shouldForward("pristine"),L["\u0275nov"](l,13)._shouldForward("dirty"),L["\u0275nov"](l,13)._shouldForward("valid"),L["\u0275nov"](l,13)._shouldForward("invalid"),L["\u0275nov"](l,13)._shouldForward("pending")),n(l,21,0,L["\u0275nov"](l,23).id,L["\u0275nov"](l,23).placeholder,L["\u0275nov"](l,23).disabled,L["\u0275nov"](l,23).required,L["\u0275nov"](l,23)._ariaDescribedby||null,L["\u0275nov"](l,23).errorState),n(l,27,0,L["\u0275nov"](l,29).disabled||null)})}function s(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,1,"vmo-bottom-input",[],null,null,null,a,En)),L["\u0275did"](49152,null,0,In,[],null,null)],null,null)}function d(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,4,"md-chip",[["class","mat-chip"],["role","option"],["tabindex","-1"]],[[2,"mat-chip-selected",null],[1,"disabled",0],[1,"aria-disabled",0],[1,"aria-selected",0]],[[null,"click"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==L["\u0275nov"](n,2)._handleClick(e)&&t}if("keydown"===l){t=!1!==L["\u0275nov"](n,2)._handleKeydown(e)&&t}if("focus"===l){t=!1!=(L["\u0275nov"](n,2)._hasFocus=!0)&&t}if("blur"===l){t=!1!=(L["\u0275nov"](n,2)._hasFocus=!1)&&t}if("click"===l){t=!1!==i.removeParticipant(n.context.$implicit)&&t}return t},null,null)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](147456,[[2,4]],1,V._1,[L.Renderer2,L.ElementRef],null,null),L["\u0275qud"](335544320,3,{_chipRemove:0}),(n()(),L["\u0275ted"](null,["\n              ","\n            "]))],null,function(n,l){n(l,0,0,L["\u0275nov"](l,2).selected,L["\u0275nov"](l,2).disabled||null,L["\u0275nov"](l,2).disabled.toString(),L["\u0275nov"](l,2).ariaSelected),n(l,4,0,l.context.$implicit.user.name)})}function c(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,16,"md-card",[["class","u-spacing-bottom-small mat-card"]],null,null,null,S.F,S.f)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V.R,[],null,null),(n()(),L["\u0275ted"](0,["\n        "])),(n()(),L["\u0275eld"](0,[[1,0],["chips",1]],0,10,"div",[["class","chips-container"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n          "])),(n()(),L["\u0275eld"](0,null,null,6,"md-chip-list",[["class","mat-chip-list"],["role","listbox"],["selectable","false"]],[[1,"tabindex",0]],[[null,"focus"],[null,"keydown"]],function(n,l,e){var t=!0;if("focus"===l){t=!1!==L["\u0275nov"](n,9).focus()&&t}if("keydown"===l){t=!1!==L["\u0275nov"](n,9)._keydown(e)&&t}return t},S.H,S.i)),L["\u0275did"](1228800,null,1,V._2,[L.Renderer2,L.ElementRef,[2,gn.c]],{selectable:[0,"selectable"]},null),L["\u0275qud"](603979776,2,{chips:1}),(n()(),L["\u0275ted"](0,["\n            "])),(n()(),L["\u0275and"](16777216,null,0,1,null,d)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),L["\u0275ted"](0,["\n          "])),(n()(),L["\u0275ted"](null,["\n        "])),(n()(),L["\u0275ted"](0,["\n      "]))],function(n,l){var e=l.component;n(l,1,0,"u-spacing-bottom-small");n(l,6,0,"chips-container");n(l,9,0,"false"),n(l,13,0,e.participants)},function(n,l){n(l,8,0,L["\u0275nov"](l,9)._tabIndex)})}function p(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,14,"md-list-item",[["class","mat-list-item"],["md-ripple",""],["role","listitem"]],null,[[null,"click"],[null,"focus"],[null,"blur"]],function(n,l,e){var t=!0,i=n.component;if("focus"===l){t=!1!==L["\u0275nov"](n,2)._handleFocus()&&t}if("blur"===l){t=!1!==L["\u0275nov"](n,2)._handleBlur()&&t}if("click"===l){t=!1!==i.addParticipant(n.context.$implicit)&&t}return t},S.O,S.q)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](1097728,null,2,V._47,[L.Renderer2,L.ElementRef,[2,V._42],[2,V._56]],null,null),L["\u0275qud"](603979776,4,{_lines:1}),L["\u0275qud"](335544320,5,{_hasAvatar:0}),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,0,2,"vmo-avatar",[["class","mat-list-avatar"],["md-list-avatar",""]],null,null,null,N.b,N.a)),L["\u0275did"](16384,[[5,4]],0,V._43,[],null,null),L["\u0275did"](49152,null,0,K.a,[],{membership:[0,"membership"]},null),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,1,3,"h4",[["class","mdc-typography--subheading1 mat-line"],["md-line",""]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,[[4,4]],0,V._40,[],null,null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),(n()(),L["\u0275ted"](2,["\n        "]))],function(n,l){n(l,8,0,l.context.$implicit);n(l,11,0,"mdc-typography--subheading1")},function(n,l){n(l,13,0,l.context.$implicit.user.name)})}function m(n){return L["\u0275vid"](0,[L["\u0275qud"](671088640,1,{chipsContainer:0}),(n()(),L["\u0275eld"](0,null,null,35,"div",[["class","vmo-component"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-toolbar",[["mode","close"],["title","New Conversation"]],null,null,null,z.b,z.a)),L["\u0275did"](245760,null,0,H.a,[Z.a,A.l,A.a,J.a,$.Location,Q.a,Y.a],{title:[0,"title"],mode:[1,"mode"]},null),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,24,"vmo-progress-spinner",[],null,null,null,W.b,W.a)),L["\u0275did"](114688,null,0,X.a,[],{hasLoaded:[0,"hasLoaded"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,20,"div",[["class","vmo-scrollable-area vmo-scrollable-area--withInput"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275and"](16777216,null,null,1,null,c)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275eld"](0,null,null,10,"md-list",[["class","vmo-list u-clickable mat-list"],["role","list"]],null,null,null,S.P,S.p)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V._42,[],null,null),L["\u0275did"](16384,null,0,V._44,[],null,null),(n()(),L["\u0275ted"](0,["\n        "])),(n()(),L["\u0275and"](16777216,null,0,3,null,p)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),L["\u0275pid"](0,Rn,[]),L["\u0275pid"](0,Rn,[]),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-load-more-button",[],null,null,null,en.b,en.a)),L["\u0275did"](49152,null,0,tn.a,[],{paginator:[0,"paginator"]},null),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,2,"vmo-bottom-input",[],null,[[null,"send"]],function(n,l,e){var t=!0,i=n.component;if("send"===l){t=!1!==i.start(e)&&t}return t},a,En)),L["\u0275did"](49152,null,0,In,[],{disabledInput:[0,"disabledInput"],disabledButton:[1,"disabledButton"]},{send:"send"}),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275ted"](null,["\n"]))],function(n,l){var e=l.component;n(l,2,0,"vmo-component");n(l,5,0,"New Conversation","close"),n(l,8,0,!e.loading);n(l,11,0,"vmo-scrollable-area vmo-scrollable-area--withInput"),n(l,14,0,e.participants.length>0);n(l,17,0,"vmo-list u-clickable"),n(l,23,0,L["\u0275unv"](l,23,0,L["\u0275nov"](l,25).transform(L["\u0275unv"](l,23,0,L["\u0275nov"](l,24).transform(e.members,e.participants)),e.membership))),n(l,29,0,e.memberListService);n(l,34,0,!1,0===e.participants.length)},null)}function f(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,2,"ng-component",[],null,null,null,m,Pn)),L["\u0275prd"](131584,null,Dn,Dn,[sn.a,dn.a,_n.a]),L["\u0275did"](245760,null,0,Cn,[Dn,A.l,A.a,dn.a,rn.a,an.a,L.ChangeDetectorRef],null,null)],function(n,l){n(l,2,0)},null)}function v(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,21,"div",[["class","vmo-message"]],[[2,"vmo-message--own",null]],null,null,null,null)),L["\u0275did"](737280,null,0,F.e,[F.p,L.ElementRef,L.Renderer2],{align:[0,"align"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,16,"div",[],null,null,null,null,null)),L["\u0275did"](737280,null,0,F.k,[F.p,L.ElementRef,L.Renderer2],{layout:[0,"layout"]},null),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-avatar",[],[[2,"hide-on-mobile",null]],null,null,N.b,N.a)),L["\u0275did"](49152,null,0,K.a,[],{membership:[0,"membership"]},null),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275eld"](0,null,null,9,"md-card",[["class","mat-card"]],null,null,null,S.F,S.f)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V.R,[],null,null),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,4,"md-card-content",[["class","mdc-typography--body1 mat-card-content"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](16384,null,0,V.T,[],null,null),(n()(),L["\u0275ted"](null,["\n        ","\n      "])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275ted"](null,["\n"]))],function(n,l){var e=l.component;n(l,1,0,e.own?"flex-end":"flex-start");n(l,2,0,"vmo-message"),n(l,5,0,e.own?"row-reverse":"row"),n(l,8,0,e.message.member);n(l,15,0,"mdc-typography--body1")},function(n,l){var e=l.component;n(l,0,0,e.own),n(l,7,0,e.own),n(l,18,0,e.message.body)})}function h(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,1,"vmo-message-box",[],null,null,null,v,Vn)),L["\u0275did"](49152,null,0,Sn,[],null,null)],null,null)}function b(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,10,"button",[["class","mat-icon-button"],["md-icon-button",""],["routerLink","participants"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==L["\u0275nov"](n,4).onClick()&&t}return t},S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],null,null),L["\u0275did"](16384,null,0,V._34,[],null,null),L["\u0275did"](16384,null,0,A.m,[A.l,A.a,[8,null],L.Renderer2,L.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["group"])),(n()(),L["\u0275ted"](0,["\n    "]))],function(n,l){n(l,4,0,"participants"),n(l,8,0)},function(n,l){n(l,0,0,L["\u0275nov"](l,2).disabled||null)})}function g(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,3,"div",[["class","mdc-typography--body1 u-relative u-vertical-spacing-big u-weak"],["fxFlexAlign","center"]],null,null,null,null,null)),L["\u0275did"](737280,null,0,F.e,[F.p,L.ElementRef,L.Renderer2],{align:[0,"align"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n          This member is deactivated.\n        "]))],function(n,l){n(l,1,0,"center");n(l,2,0,"mdc-typography--body1 u-relative u-vertical-spacing-big u-weak")},null)}function R(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,3,"div",[["class","mdc-typography--body1 u-relative u-vertical-spacing-big u-weak"],["fxFlexAlign","center"]],null,null,null,null,null)),L["\u0275did"](737280,null,0,F.e,[F.p,L.ElementRef,L.Renderer2],{align:[0,"align"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n          You are no longer in this conversation.\n        "]))],function(n,l){n(l,1,0,"center");n(l,2,0,"mdc-typography--body1 u-relative u-vertical-spacing-big u-weak")},null)}function _(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,4,"div",[["class","mdc-typography--caption u-relative u-vertical-spacing-big u-weak"],["fxLayoutAlign","center"]],null,null,null,null,null)),L["\u0275did"](737280,null,0,F.j,[F.p,L.ElementRef,L.Renderer2,[8,null]],{align:[0,"align"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),L["\u0275ppd"](2)],function(n,l){n(l,1,0,"center");n(l,2,0,"mdc-typography--caption u-relative u-vertical-spacing-big u-weak")},function(n,l){n(l,3,0,L["\u0275unv"](l,3,0,n(l,4,0,L["\u0275nov"](l.parent.parent,0),l.parent.context.$implicit.sentAt,"lll")))})}function y(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,2,"div",[["class","mdc-typography--caption u-relative u-weak vmo-message-name"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n            ","\n          "]))],function(n,l){n(l,1,0,"mdc-typography--caption u-relative u-weak vmo-message-name")},function(n,l){n(l,2,0,l.parent.context.$implicit.member.user.name)})}function D(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,10,"div",[],null,null,null,null,null)),(n()(),L["\u0275ted"](null,["\n          "])),(n()(),L["\u0275and"](16777216,null,null,1,null,_)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),L["\u0275ted"](null,["\n\n          "])),(n()(),L["\u0275and"](16777216,null,null,1,null,y)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),L["\u0275ted"](null,["\n\n          "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-message-box",[],null,null,null,v,Vn)),L["\u0275did"](49152,null,0,Sn,[],{message:[0,"message"],own:[1,"own"]},null),(n()(),L["\u0275ted"](null,["\n        "]))],function(n,l){var e=l.component;n(l,3,0,e.shouldDisplayTimestamp(l.context.$implicit)),n(l,6,0,e.shouldDisplayName(l.context.$implicit)),n(l,9,0,l.context.$implicit,e.isPostedByUser(l.context.$implicit))},null)}function C(n){return L["\u0275vid"](0,[L["\u0275pid"](0,An.DateFormatPipe,[]),L["\u0275qud"](402653184,1,{window:0}),(n()(),L["\u0275eld"](0,null,null,47,"div",[["class","vmo-component"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,8,"vmo-toolbar",[["mode","back"]],null,null,null,z.b,z.a)),L["\u0275did"](245760,null,0,H.a,[Z.a,A.l,A.a,J.a,$.Location,Q.a,Y.a],{title:[0,"title"],mode:[1,"mode"]},null),L["\u0275pid"](0,q,[]),L["\u0275pid"](0,T,[]),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275and"](16777216,null,0,2,null,b)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),L["\u0275pid"](131072,$.AsyncPipe,[L.ChangeDetectorRef]),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,27,"vmo-progress-spinner",[],null,null,null,W.b,W.a)),L["\u0275did"](114688,null,0,X.a,[],{hasLoaded:[0,"hasLoaded"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,23,"div",[["class","vmo-conversation"],["fxLayout","column"],["fxLayoutAlign","end"]],[[2,"vmo-conversation--locked",null]],null,null,null,null)),L["\u0275did"](737280,null,0,F.k,[F.p,L.ElementRef,L.Renderer2],{layout:[0,"layout"]},null),L["\u0275did"](737280,null,0,F.j,[F.p,L.ElementRef,L.Renderer2,[2,F.k]],{align:[0,"align"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275pid"](131072,$.AsyncPipe,[L.ChangeDetectorRef]),(n()(),L["\u0275ted"](null,["\n\n      "])),(n()(),L["\u0275eld"](0,[[1,0],["window",1]],null,16,"div",[["class","vmo-conversation-window"],["fxLayout","column-reverse"]],null,null,null,null,null)),L["\u0275did"](737280,null,0,F.k,[F.p,L.ElementRef,L.Renderer2],{layout:[0,"layout"]},null),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n        "])),(n()(),L["\u0275and"](16777216,null,null,1,null,g)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),L["\u0275ted"](null,["\n        "])),(n()(),L["\u0275and"](16777216,null,null,2,null,R)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),L["\u0275pid"](131072,$.AsyncPipe,[L.ChangeDetectorRef]),(n()(),L["\u0275ted"](null,["\n\n        "])),(n()(),L["\u0275and"](16777216,null,null,1,null,D)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),L["\u0275ted"](null,["\n\n        "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-load-more-button",[],null,null,null,en.b,en.a)),L["\u0275did"](49152,null,0,tn.a,[],{paginator:[0,"paginator"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,4,"vmo-bottom-input",[],null,[[null,"send"]],function(n,l,e){var t=!0,i=n.component;if("send"===l){t=!1!==i.sendMessage(e)&&t}return t},a,En)),L["\u0275did"](49152,null,0,In,[],{disabledInput:[0,"disabledInput"],disabledButton:[1,"disabledButton"]},{send:"send"}),L["\u0275pid"](131072,$.AsyncPipe,[L.ChangeDetectorRef]),L["\u0275pid"](131072,$.AsyncPipe,[L.ChangeDetectorRef]),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275ted"](null,["\n"])),(n()(),L["\u0275ted"](null,["\n\n"])),(n()(),L["\u0275eld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),L["\u0275did"](212992,null,0,A.q,[A.b,L.ViewContainerRef,L.ComponentFactoryResolver,[8,null],L.ChangeDetectorRef],null,null)],function(n,l){var e=l.component;n(l,3,0,"vmo-component");n(l,6,0,L["\u0275unv"](l,6,0,L["\u0275nov"](l,8).transform(L["\u0275unv"](l,6,0,L["\u0275nov"](l,7).transform(null==e.conversation?null:e.conversation.participations,e.membership)))),"back"),n(l,11,0,(null==e.conversation?null:e.conversation.group)&&!L["\u0275unv"](l,11,0,L["\u0275nov"](l,12).transform(e.isLocked))),n(l,16,0,!e.loading);n(l,19,0,"column");n(l,20,0,"end");n(l,21,0,"vmo-conversation");n(l,25,0,"column-reverse");n(l,26,0,"vmo-conversation-window"),n(l,29,0,e.isMemberRemoved()),n(l,32,0,L["\u0275unv"](l,32,0,L["\u0275nov"](l,33).transform(e.isLocked))),n(l,36,0,e.messages),n(l,39,0,e.messageListService),n(l,45,0,L["\u0275unv"](l,45,0,L["\u0275nov"](l,46).transform(e.isLocked))||e.isMemberRemoved(),L["\u0275unv"](l,45,1,L["\u0275nov"](l,47).transform(e.isLocked))||e.isMemberRemoved()),n(l,52,0)},function(n,l){var e=l.component;n(l,18,0,L["\u0275unv"](l,18,0,L["\u0275nov"](l,22).transform(e.isLocked))||e.isMemberRemoved())})}function k(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,3,"ng-component",[],null,null,null,C,Jn)),L["\u0275prd"](131584,null,$n,$n,[A.a,sn.a,an.a]),L["\u0275prd"](131584,null,zn,zn,[A.a,sn.a,rn.a]),L["\u0275did"](245760,null,0,Hn,[$n,dn.a,zn,sn.a,rn.a,an.a,L.ChangeDetectorRef],null,null)],function(n,l){n(l,3,0)},null)}function I(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,27,"md-list-item",[["class","mat-list-item"],["role","listitem"]],null,[[null,"focus"],[null,"blur"]],function(n,l,e){var t=!0;if("focus"===l){t=!1!==L["\u0275nov"](n,2)._handleFocus()&&t}if("blur"===l){t=!1!==L["\u0275nov"](n,2)._handleBlur()&&t}return t},S.O,S.q)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](1097728,null,2,V._47,[L.Renderer2,L.ElementRef,[2,V._42],[2,V._56]],null,null),L["\u0275qud"](603979776,1,{_lines:1}),L["\u0275qud"](335544320,2,{_hasAvatar:0}),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,0,2,"vmo-avatar",[["class","mat-list-avatar"],["md-list-avatar",""]],null,null,null,N.b,N.a)),L["\u0275did"](16384,[[2,4]],0,V._43,[],null,null),L["\u0275did"](49152,null,0,K.a,[],{membership:[0,"membership"]},null),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,1,2,"h4",[["class","mat-line"],["md-line",""]],null,null,null,null,null)),L["\u0275did"](16384,[[1,4]],0,V._40,[],null,null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,2,1,"span",[["class","u-fill"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,2,9,"button",[["class","mat-icon-button"],["md-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==i.removeParticipant(n.context.$implicit)&&t}return t},S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],null,null),L["\u0275did"](16384,null,0,V._34,[],null,null),(n()(),L["\u0275ted"](0,["\n            "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["remove_circle_outline"])),(n()(),L["\u0275ted"](0,["\n          "])),(n()(),L["\u0275ted"](2,["\n        "]))],function(n,l){n(l,8,0,l.context.$implicit.member);n(l,15,0,"u-fill"),n(l,24,0)},function(n,l){n(l,12,0,l.context.$implicit.member.user.name),n(l,17,0,L["\u0275nov"](l,19).disabled||null)})}function w(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,37,"div",[["class","vmo-component"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,14,"vmo-toolbar",[["mode","back"],["title","Participants"]],null,null,null,z.b,z.a)),L["\u0275did"](245760,null,0,H.a,[Z.a,A.l,A.a,J.a,$.Location,Q.a,Y.a],{title:[0,"title"],mode:[1,"mode"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,10,"button",[["class","mat-icon-button"],["md-icon-button",""],["routerLink","add"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==L["\u0275nov"](n,10).onClick()&&t}return t},S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],null,null),L["\u0275did"](16384,null,0,V._34,[],null,null),L["\u0275did"](16384,null,0,A.m,[A.l,A.a,[8,null],L.Renderer2,L.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["add"])),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,17,"vmo-progress-spinner",[],null,null,null,W.b,W.a)),L["\u0275did"](114688,null,0,X.a,[],{hasLoaded:[0,"hasLoaded"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,13,"div",[["class","vmo-scrollable-area"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275eld"](0,null,null,9,"md-list",[["class","vmo-list mat-list"],["role","list"]],null,null,null,S.P,S.p)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V._42,[],null,null),L["\u0275did"](16384,null,0,V._44,[],null,null),(n()(),L["\u0275ted"](0,["\n        "])),(n()(),L["\u0275and"](16777216,null,0,2,null,I)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),L["\u0275pid"](0,q,[]),(n()(),L["\u0275ted"](0,["\n      "])),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n"])),(n()(),L["\u0275ted"](null,["\n\n"])),(n()(),L["\u0275eld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),L["\u0275did"](212992,null,0,A.q,[A.b,L.ViewContainerRef,L.ComponentFactoryResolver,[8,null],L.ChangeDetectorRef],null,null)],function(n,l){var e=l.component;n(l,1,0,"vmo-component");n(l,4,0,"Participants","back");n(l,10,0,"add"),n(l,14,0),n(l,20,0,!e.loading);n(l,23,0,"vmo-scrollable-area");n(l,26,0,"vmo-list"),n(l,32,0,L["\u0275unv"](l,32,0,L["\u0275nov"](l,33).transform(null==e.conversation?null:e.conversation.participations))),n(l,40,0)},function(n,l){n(l,6,0,L["\u0275nov"](l,8).disabled||null)})}function O(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,1,"ng-component",[],null,null,null,w,Wn)),L["\u0275did"](245760,null,0,Yn,[A.l,dn.a,zn,rn.a,L.ChangeDetectorRef],null,null)],function(n,l){n(l,1,0)},null)}function E(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,27,"md-list-item",[["class","mat-list-item"],["role","listitem"]],null,[[null,"focus"],[null,"blur"]],function(n,l,e){var t=!0;if("focus"===l){t=!1!==L["\u0275nov"](n,2)._handleFocus()&&t}if("blur"===l){t=!1!==L["\u0275nov"](n,2)._handleBlur()&&t}return t},S.O,S.q)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](1097728,null,2,V._47,[L.Renderer2,L.ElementRef,[2,V._42],[2,V._56]],null,null),L["\u0275qud"](603979776,1,{_lines:1}),L["\u0275qud"](335544320,2,{_hasAvatar:0}),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,0,2,"vmo-avatar",[["class","mat-list-avatar"],["md-list-avatar",""]],null,null,null,N.b,N.a)),L["\u0275did"](16384,[[2,4]],0,V._43,[],null,null),L["\u0275did"](49152,null,0,K.a,[],{membership:[0,"membership"]},null),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,1,2,"h4",[["class","mat-line"],["md-line",""]],null,null,null,null,null)),L["\u0275did"](16384,[[1,4]],0,V._40,[],null,null),(n()(),L["\u0275ted"](null,["\n            ","\n          "])),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,2,1,"span",[["class","u-fill"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](2,["\n          "])),(n()(),L["\u0275eld"](0,null,2,9,"button",[["class","mat-icon-button"],["md-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==i.addParticipant(n.context.$implicit)&&t}return t},S.D,S.d)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](180224,null,0,V.I,[L.Renderer2,L.ElementRef,G.a,V.f],null,null),L["\u0275did"](16384,null,0,V._34,[],null,null),(n()(),L["\u0275ted"](0,["\n            "])),(n()(),L["\u0275eld"](0,null,0,3,"md-icon",[["class","mat-icon"],["role","img"]],null,null,null,S.N,S.o)),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](638976,null,0,V._33,[L.Renderer2,L.ElementRef,V._36,[8,null]],null,null),(n()(),L["\u0275ted"](0,["add"])),(n()(),L["\u0275ted"](0,["\n          "])),(n()(),L["\u0275ted"](2,["\n        "]))],function(n,l){n(l,8,0,l.context.$implicit);n(l,15,0,"u-fill"),n(l,24,0)},function(n,l){n(l,12,0,l.context.$implicit.user.name),n(l,17,0,L["\u0275nov"](l,19).disabled||null)})}function M(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,9,"md-list",[["class","vmo-list mat-list"],["role","list"]],null,null,null,S.P,S.p)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),L["\u0275did"](16384,null,0,V._64,[[2,V.i],L.ElementRef],null,null),L["\u0275did"](49152,null,0,V._42,[],null,null),L["\u0275did"](16384,null,0,V._44,[],null,null),(n()(),L["\u0275ted"](0,["\n        "])),(n()(),L["\u0275and"](16777216,null,0,2,null,E)),L["\u0275did"](802816,null,0,$.NgForOf,[L.ViewContainerRef,L.TemplateRef,L.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),L["\u0275pid"](0,nl,[]),(n()(),L["\u0275ted"](0,["\n      "]))],function(n,l){var e=l.component;n(l,1,0,"vmo-list"),n(l,7,0,L["\u0275unv"](l,7,0,L["\u0275nov"](l,8).transform(e.members,e.conversation)))},null)}function P(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,20,"div",[["class","vmo-component"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n  "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-toolbar",[["mode","close"],["title","Add Participant"]],null,null,null,z.b,z.a)),L["\u0275did"](245760,null,0,H.a,[Z.a,A.l,A.a,J.a,$.Location,Q.a,Y.a],{title:[0,"title"],mode:[1,"mode"]},null),(n()(),L["\u0275ted"](null,["\n\n  "])),(n()(),L["\u0275eld"](0,null,null,13,"vmo-progress-spinner",[],null,null,null,W.b,W.a)),L["\u0275did"](114688,null,0,X.a,[],{hasLoaded:[0,"hasLoaded"]},null),(n()(),L["\u0275ted"](0,["\n    "])),(n()(),L["\u0275eld"](0,null,0,9,"div",[["class","vmo-scrollable-area"]],null,null,null,null,null)),L["\u0275did"](999424,null,0,F.c,[F.p,L.ElementRef,L.Renderer2,L.Renderer,L.IterableDiffers,L.KeyValueDiffers,[8,null]],{classBase:[0,"classBase"]},null),(n()(),L["\u0275ted"](null,["\n      "])),(n()(),L["\u0275and"](16777216,null,null,2,null,M)),L["\u0275did"](16384,null,0,$.NgIf,[L.ViewContainerRef,L.TemplateRef],{ngIf:[0,"ngIf"]},null),L["\u0275pid"](0,nl,[]),(n()(),L["\u0275ted"](null,["\n\n      "])),(n()(),L["\u0275eld"](0,null,null,1,"vmo-load-more-button",[],null,null,null,en.b,en.a)),L["\u0275did"](49152,null,0,tn.a,[],{paginator:[0,"paginator"]},null),(n()(),L["\u0275ted"](null,["\n    "])),(n()(),L["\u0275ted"](0,["\n  "])),(n()(),L["\u0275ted"](null,["\n"]))],function(n,l){var e=l.component;n(l,1,0,"vmo-component");n(l,4,0,"Add Participant","close"),n(l,7,0,!e.loading);n(l,10,0,"vmo-scrollable-area");var t=null;n(l,13,0,null==(t=L["\u0275unv"](l,13,0,L["\u0275nov"](l,14).transform(e.members,e.conversation)))?null:t.length),n(l,17,0,e.memberListService)},null)}function x(n){return L["\u0275vid"](0,[(n()(),L["\u0275eld"](0,null,null,2,"ng-component",[],null,null,null,P,tl)),L["\u0275prd"](131584,null,Dn,Dn,[sn.a,dn.a,_n.a]),L["\u0275did"](245760,null,0,ll,[Dn,zn,rn.a,L.ChangeDetectorRef],null,null)],function(n,l){n(l,2,0)},null)}Object.defineProperty(l,"__esModule",{value:!0});var L=e("/oeL"),B=function(){function n(){}return n}(),S=e("v6Q/"),F=e("r0ix"),V=e("Z04r"),A=e("BkNc"),N=e("LqLj"),K=e("/4xE"),q=function(){function n(){}return n.prototype.transform=function(n,l){if(n)return n=n.filter(function(n){return!n.leftAt}),l?n.filter(function(n){return n.memberId!==l.id}):n},n}(),T=function(){function n(){}return n.prototype.transform=function(n,l){if(n)return n.map(function(n){return n.member.user.name}).join(", ")},n}(),$=e("qbdv"),j=e("sexv"),U=function(){function n(){}return n.prototype.transform=function(n){if(n)return n.filter(function(n){return null!==n.lastMessage})},n}(),z=e("r4yX"),H=e("4/l9"),Z=e("Rwpq"),J=e("RDPe"),Q=e("SVBQ"),Y=e("wN0M"),G=e("JYHx"),W=e("/N6S"),X=e("fvNl"),nn=e("NmCJ"),ln=e("kVea"),en=e("CRl2"),tn=e("F39Q"),un=e("bKpL"),on=(e("vJ3t"),e("ZQKz"),e("F+m3")),rn=e("V+HW"),an=e("FWX0"),sn=e("FKJ8"),dn=e("vhlM"),cn=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])};return function(l,e){function t(){this.constructor=l}n(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),pn=function(n){function l(l,e,t,i){var u=n.call(this)||this;return u.sockets=l,u.activeMembershipService=e,u.conversationService=t,u.messageService=i,u.conversations=u.subject.asObservable(),u.socketSubscription=u.sockets.connects.subscribe(function(){u.cursor=null,u.snapshot=[],u.sockets.stopListening(u),u.activeMembershipService.membership.subscribe(function(n){u.paginator.subscribe(function(l){u.pagination(u.conversationService.get(n.organizationId,l,u.cursor)).subscribe(function(n){return u.add(n)})}),u.sockets.listenForUser(n.userId,{conversation_started:function(n){return u.addConversation(n)},message_sent:function(n){return u.setLastMessage(n)},last_message_read:function(n){return u.setParticipant(n)},participant_added:function(n){return u.addParticipant(n)},participant_removed:function(n){return u.setParticipant(n)}},u)})}),u}return cn(l,n),l.prototype.ngOnDestroy=function(){this.sockets.stopListening(this),n.prototype.ngOnDestroy.call(this)},l.prototype.addConversation=function(n){var l=this;this.conversationService.find(n.id).subscribe(function(n){l.snapshot.unshift(n),l.updateFromSnapshot()})},l.prototype.setLastMessage=function(n){var l=this.snapshot.find(function(l){return l.id===n.conversationId});l&&(l.lastMessage=n,l.lastMessageId=n.id,this.moveToFront(l))},l.prototype.moveToFront=function(n){this.snapshot=this.snapshot.filter(function(l){return l.id!==n.id}),this.snapshot.unshift(n),this.updateFromSnapshot()},l.prototype.addParticipant=function(n){var l=this.snapshot.find(function(l){return l.id===n.conversationId});l&&(l.participations.push(n),this.updateFromSnapshot())},l.prototype.setParticipant=function(n){var l=this.snapshot.find(function(l){return l.id===n.conversationId});l&&(l.participations=l.participations.map(function(l){return l.id===n.id?n:l}),this.updateFromSnapshot())},l.ctorParameters=function(){return[{type:sn.a},{type:dn.a},{type:rn.a},{type:an.a}]},l}(on.a),mn=function(){function n(n,l,e){this.conversationListService=n,this.activeMembershipService=l,this.changeDetectorRef=e,this.loading=!0,this.subscriptions=[]}return n.prototype.ngOnInit=function(){var n=this;this.subscriptions.push(un.Observable.combineLatest(this.activeMembershipService.membership,this.conversationListService.conversations).subscribe(function(l){n.membership=l[0],n.conversations=l[1],n.changeDetectorRef.detectChanges(),n.loading=!1}))},n.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(n){return n.unsubscribe()})},n.prototype.hasUnreadMessages=function(n){var l=this,e=n.participations.find(function(n){return n.memberId===l.membership.id});return!!e&&(!(!e.lastReadMessage||!n.lastMessage)&&e.lastReadMessage.id!==n.lastMessage.id)},n.ctorParameters=function(){return[{type:pn},{type:dn.a},{type:L.ChangeDetectorRef}]},n}(),fn=[],vn=L["\u0275crt"]({encapsulation:2,styles:fn,data:{}}),hn=L["\u0275ccf"]("ng-component",mn,r,{},{},[]),bn=[".chips-container[_ngcontent-%COMP%]{max-height:140px;overflow-y:scroll;margin-bottom:-8px!important}.mat-chip[_ngcontent-%COMP%]{margin-bottom:8px!important}"],gn=e("UPmf"),Rn=function(){function n(){}return n.prototype.transform=function(n,l){if(n)return Array.isArray(l)?n.filter(function(n){return!l.find(function(l){return n.id===l.id})}):n.filter(function(n){return n.id!==l.id})},n}(),_n=e("CKun"),yn=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])};return function(l,e){function t(){this.constructor=l}n(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dn=function(n){function l(l,e,t){var i=n.call(this)||this;return i.sockets=l,i.activeMembershipService=e,i.memberService=t,i.members=i.subject.asObservable(),i.socketSubscription=i.sockets.connects.subscribe(function(){i.cursor=null,i.snapshot=[],i.sockets.stopListening(i),i.activeMembershipService.membership.subscribe(function(n){i.paginator.subscribe(function(l){i.pagination(i.memberService.get(n.organizationId,l,i.cursor)).subscribe(function(n){return i.add(n)})})})}),i}return yn(l,n),l.prototype.ngOnDestroy=function(){this.sockets.stopListening(this),n.prototype.ngOnDestroy.call(this)},l.ctorParameters=function(){return[{type:sn.a},{type:dn.a},{type:_n.a}]},l}(on.a),Cn=function(){function n(n,l,e,t,i,u,o){this.memberListService=n,this.router=l,this.route=e,this.activeMembershipService=t,this.conversationService=i,this.messageService=u,this.changeDetectorRef=o,this.loading=!0,this.participants=[],this.subscriptions=[]}return n.prototype.ngOnInit=function(){var n=this;this.subscriptions.push(un.Observable.combineLatest(this.activeMembershipService.membership,this.memberListService.members).subscribe(function(l){n.membership=l[0],n.members=l[1],n.changeDetectorRef.detectChanges(),n.loading=!1}))},n.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(n){return n.unsubscribe()})},n.prototype.addParticipant=function(n){-1===this.participants.indexOf(n)&&this.participants.push(n),this.scrollToBottom()},n.prototype.removeParticipant=function(n){this.participants.splice(this.participants.indexOf(n),1)},n.prototype.start=function(n){var l=this;this.loading=!0,this.conversationService.start(this.membership.organizationId,this.participants).then(function(e){l.messageService.send(e.id,n).then(function(){l.router.navigate(["..",e.id],{relativeTo:l.route}),l.loading=!1})})},n.prototype.scrollToBottom=function(){var n=this;setTimeout(function(){return n.chipsContainer.nativeElement.scrollTop=n.chipsContainer.nativeElement.scrollHeight},50)},n.ctorParameters=function(){return[{type:Dn},{type:A.l},{type:A.a},{type:dn.a},{type:rn.a},{type:an.a},{type:L.ChangeDetectorRef}]},n}(),kn=["button[_ngcontent-%COMP%]:not([disabled]){color:#2175ff!important}.mat-toolbar[_ngcontent-%COMP%]{position:absolute!important;bottom:0;background:#fff;font-size:inherit!important}.mat-input-container[_ngcontent-%COMP%]    {font-weight:400}.mat-input-container[_ngcontent-%COMP%]     input{height:auto}.mat-input-container[_ngcontent-%COMP%]     .mat-input-infix{border-top:0}.mat-input-container[_ngcontent-%COMP%]     .mat-input-wrapper{padding-bottom:0}.mat-input-container[_ngcontent-%COMP%]     .mat-input-underline{opacity:0}.mat-input-container[_ngcontent-%COMP%]     .mat-input-placeholder{-webkit-transform:none!important;transform:none!important}.mat-input-container[_ngcontent-%COMP%]     .mat-input-placeholder:not(.mat-empty){display:none!important}.mat-input-container[_ngcontent-%COMP%]     .mat-input-placeholder, .mat-input-container[_ngcontent-%COMP%]     .mat-input-placeholder.mat-focused{color:rgba(0,0,0,.38)}"],In=function(){function n(){this.send=new L.EventEmitter}return n.prototype.onSubmit=function(n){this.send.emit(n)},n}(),wn=e("bm2B"),On=[kn],En=L["\u0275crt"]({encapsulation:0,styles:On,data:{}}),Mn=(L["\u0275ccf"]("vmo-bottom-input",In,s,{disabledInput:"disabledInput",disabledButton:"disabledButton"},{send:"send"},[]),[bn]),Pn=L["\u0275crt"]({encapsulation:0,styles:Mn,data:{}}),xn=L["\u0275ccf"]("ng-component",Cn,f,{},{},[]),Ln=[".vmo-conversation[_ngcontent-%COMP%]{max-height:calc(100% - 64px)}@media (max-width:600px){.vmo-conversation[_ngcontent-%COMP%]{max-height:calc(100% - 56px)}}.vmo-conversation--locked[_ngcontent-%COMP%]{opacity:.54}.vmo-conversation-window[_ngcontent-%COMP%]{padding:0 16px;overflow-y:scroll}.vmo-message-name[_ngcontent-%COMP%]{padding-bottom:6px;margin-left:56px}"],Bn=["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .vmo-message[_ngcontent-%COMP%]{padding-bottom:16px;margin-right:40px}[_nghost-%COMP%]   .vmo-message--own[_ngcontent-%COMP%]{margin-right:0;margin-left:40px}[_nghost-%COMP%]   .vmo-message--own[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{background:#2979ff;color:#fff}@media (max-width:960px){[_nghost-%COMP%]   .vmo-message--own[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .vmo-message--own[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{margin-right:0!important}}[_nghost-%COMP%]   .vmo-message[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{padding:10px 16px;margin:0 16px}@media (max-width:960px){.hide-on-mobile[_ngcontent-%COMP%]{display:none}}.mat-card-content[_ngcontent-%COMP%]{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}"],Sn=function(){function n(){}return n}(),Fn=[Bn],Vn=L["\u0275crt"]({encapsulation:0,styles:Fn,data:{}}),An=(L["\u0275ccf"]("vmo-message-box",Sn,h,{message:"message",own:"own"},{},[]),e("iOEj")),Nn=e("gvep"),Kn=e("rlar"),qn=e("ge1L"),Tn=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])};return function(l,e){function t(){this.constructor=l}n(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),$n=function(n){function l(l,e,t){var i=n.call(this)||this;return i.route=l,i.sockets=e,i.messageService=t,i.limit=30,i.messages=i.subject.asObservable(),i.socketSubscription=i.sockets.connects.subscribe(function(){i.cursor=null,i.snapshot=[],i.sockets.stopListening(i),i.paginator.subscribe(function(n){i.pagination(i.messageService.get(i.route.snapshot.params.conversation,n,i.cursor)).subscribe(function(n){return i.add(n)})}),i.sockets.listenForConversation(i.route.snapshot.params.conversation,{message_sent:function(n){return i.addMessage(n)}},i)}),i}return Tn(l,n),l.prototype.ngOnDestroy=function(){this.sockets.stopListening(this),n.prototype.ngOnDestroy.call(this)},l.prototype.addMessage=function(n){n.conversationId===this.route.snapshot.params.conversation&&(this.snapshot.unshift(n),this.updateFromSnapshot())},l.ctorParameters=function(){return[{type:A.a},{type:sn.a},{type:an.a}]},l}(on.a),jn=e("RqHT"),Un=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])};return function(l,e){function t(){this.constructor=l}n(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),zn=function(n){function l(l,e,t){var i=n.call(this)||this;return i.route=l,i.sockets=e,i.conversationService=t,i.conversation=i.subject.asObservable(),i.socketSubscription=i.sockets.connects.subscribe(function(){i.sockets.stopListening(i),i.conversationService.find(i.route.snapshot.params.conversation).subscribe(function(n){return i.set(n)}),i.sockets.listenForConversation(i.route.snapshot.params.conversation,{message_sent:function(n){return i.setLastMessage(n)},participant_added:function(n){return i.addParticipant(n)},participant_removed:function(n){return i.setParticipant(n)}},i)}),i}return Un(l,n),l.prototype.ngOnDestroy=function(){this.sockets.stopListening(this),n.prototype.ngOnDestroy.call(this)},l.prototype.setLastMessage=function(n){this.snapshot.lastMessage=n,this.snapshot.lastMessageId=n.id,this.updateFromSnapshot()},l.prototype.addParticipant=function(n){this.snapshot.participations.push(n),this.updateFromSnapshot()},l.prototype.setParticipant=function(n){this.snapshot.participations=this.snapshot.participations.map(function(l){return l.id===n.id?n:l}),this.updateFromSnapshot()},l.ctorParameters=function(){return[{type:A.a},{type:sn.a},{type:rn.a}]},l}(jn.a),Hn=function(){function n(n,l,e,t,i,u,o){this.messageListService=n,this.activeMembershipService=l,this.activeConversationService=e,this.sockets=t,this.conversationService=i,this.messageService=u,this.changeDetectorRef=o,this.loading=!0,this.isLocked=new Nn.BehaviorSubject(!0),this.subscriptions=[]}return n.prototype.ngOnInit=function(){var n=this,l=new Kn.Subject;this.subscriptions.push(un.Observable.combineLatest(this.activeMembershipService.membership,this.activeConversationService.conversation,this.messageListService.messages).subscribe(function(e){n.membership=e[0],n.conversation=e[1],n.messages=e[2],n.isLocked.next(n.conversationService.isLocked(n.conversation,n.membership)),n.loading=!1,n.changeDetectorRef.detectChanges(),l.next()})),l.first().subscribe(function(){n.messageListService.messages.subscribe(function(){return n.markLastMessageAsRead()})}),this.activeConversationService.conversation.first().subscribe(function(l){n.sockets.listenForConversation(l.id,{message_sent:function(l){return n.scrollToBottom()}},n)})},n.prototype.ngOnDestroy=function(){this.sockets.stopListening(this),this.isLocked.unsubscribe(),this.subscriptions.forEach(function(n){return n.unsubscribe()})},n.prototype.sendMessage=function(n){this.messageService.send(this.conversation.id,n)},n.prototype.isMemberRemoved=function(){if(!this.conversation||this.conversation.group)return!1;for(var n=0,l=this.conversation.participations;n<l.length;n++){if(l[n].member.deletedAt)return!0}return!1},n.prototype.isPostedByUser=function(n){return n.memberId===this.membership.id},n.prototype.shouldDisplayName=function(n){if(!this.conversation.group||this.isPostedByUser(n))return!1;var l=this.messages[this.messages.indexOf(n)+1];return!l||(l.memberId!==n.memberId||this.shouldDisplayTimestamp(n))},n.prototype.shouldDisplayTimestamp=function(n){var l=this.messages.indexOf(n);if(l===this.messages.length-1)return this.messageListService.isComplete();var e=this.messages[l+1];return!e||qn.duration(qn(n.sentAt).diff(qn(e.sentAt))).asHours()>1},n.prototype.markLastMessageAsRead=function(){this.hasReadLastMessage()||this.conversationService.markAsRead(this.getUserParticipation())},n.prototype.hasReadLastMessage=function(){return this.getUserParticipation().lastReadMessageId===this.conversation.lastMessageId},n.prototype.getUserParticipation=function(){var n=this;return this.conversation.participations.find(function(l){return l.memberId===n.membership.id})},n.prototype.scrollToBottom=function(){var n=this;setTimeout(function(){return n.window.nativeElement.scrollTop=n.window.nativeElement.scrollHeight},50)},n.ctorParameters=function(){return[{type:$n},{type:dn.a},{type:zn},{type:sn.a},{type:rn.a},{type:an.a},{type:L.ChangeDetectorRef}]},n}(),Zn=[Ln],Jn=L["\u0275crt"]({encapsulation:0,styles:Zn,data:{}}),Qn=L["\u0275ccf"]("ng-component",Hn,k,{},{},[]),Yn=function(){function n(n,l,e,t,i){this.router=n,this.activeMembershipService=l,this.activeConversationService=e,this.conversationService=t,this.changeDetectorRef=i,this.loading=!0,this.subscriptions=[]}return n.prototype.ngOnInit=function(){var n=this;this.subscriptions.push(un.Observable.combineLatest(this.activeMembershipService.membership,this.activeConversationService.conversation).subscribe(function(l){n.membership=l[0],n.conversation=l[1],n.changeDetectorRef.detectChanges(),n.loading=!1}))},n.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(n){return n.unsubscribe()})},n.prototype.removeParticipant=function(n){this.conversationService.removeParticipant(n),n.memberId===this.membership.id&&this.router.navigate(["messages",this.conversation.id])},n.ctorParameters=function(){return[{type:A.l},{type:dn.a},{type:zn},{type:rn.a},{type:L.ChangeDetectorRef}]},n}(),Gn=[],Wn=L["\u0275crt"]({encapsulation:2,styles:Gn,data:{}}),Xn=L["\u0275ccf"]("ng-component",Yn,O,{},{},[]),nl=function(){function n(){}return n.prototype.transform=function(n,l){if(n&&l){var e=l.participations.filter(function(n){return!n.leftAt}).map(function(n){return n.memberId});return n.filter(function(n){return-1===e.indexOf(n.id)})}},n}(),ll=function(){function n(n,l,e,t){this.memberListService=n,this.activeConversationService=l,this.conversationService=e,this.changeDetectorRef=t,this.loading=!0,this.subscriptions=[]}return n.prototype.ngOnInit=function(){var n=this;this.subscriptions.push(un.Observable.combineLatest(this.activeConversationService.conversation,this.memberListService.members).subscribe(function(l){n.conversation=l[0],n.members=l[1],n.changeDetectorRef.detectChanges(),n.loading=!1}))},n.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(n){return n.unsubscribe()})},n.prototype.addParticipant=function(n){this.conversationService.addParticipant(this.conversation.id,n)},n.ctorParameters=function(){return[{type:Dn},{type:zn},{type:rn.a},{type:L.ChangeDetectorRef}]},n}(),el=[],tl=L["\u0275crt"]({encapsulation:2,styles:el,data:{}}),il=L["\u0275ccf"]("ng-component",ll,x,{},{},[]),ul=e("fc+i"),ol=e("vVgA"),rl=e("CPp0"),al=e("f3MN"),sl=e("z1Gz"),dl=e("dGUy"),cl=e("z8QC"),pl=e("Zane"),ml=e("mSH7"),fl=e("d8q7"),vl=e("p5gf"),hl=e("mRVF"),bl=e("T2Au"),gl=e("0zMf"),Rl=function(){function n(){}return n}();e.d(l,"MessagingModuleNgFactory",function(){return _l});var _l=L["\u0275cmf"](B,[],function(n){return L["\u0275mod"]([L["\u0275mpd"](512,L.ComponentFactoryResolver,L["\u0275CodegenComponentFactoryResolver"],[[8,[S.b,S.c,S.A,S.B,S.a,hn,xn,Qn,Xn,il]],[3,L.ComponentFactoryResolver],L.NgModuleRef]),L["\u0275mpd"](4608,$.NgLocalization,$.NgLocaleLocalization,[L.LOCALE_ID]),L["\u0275mpd"](5120,F.a,F.d,[]),L["\u0275mpd"](4608,F.b,F.b,[F.a]),L["\u0275mpd"](4608,F.o,F.o,[L.NgZone,ul.b]),L["\u0275mpd"](5120,F.p,F.n,[[3,F.p],F.b,F.o]),L["\u0275mpd"](5120,F.s,F.r,[[3,F.s],F.o,F.b]),L["\u0275mpd"](6144,gn.b,null,[ul.b]),L["\u0275mpd"](4608,gn.c,gn.c,[[2,gn.b]]),L["\u0275mpd"](4608,G.a,G.a,[]),L["\u0275mpd"](5120,ol.c,ol.a,[[3,ol.c],L.NgZone,G.a]),L["\u0275mpd"](5120,ol.g,ol.f,[[3,ol.g],ol.c]),L["\u0275mpd"](4608,V.f,V.f,[L.NgZone,G.a]),L["\u0275mpd"](5120,V._36,V.h,[[3,V._36],[2,rl.Http],ul.c]),L["\u0275mpd"](4608,wn.t,wn.t,[]),L["\u0275mpd"](4608,al.a,al.a,[]),L["\u0275mpd"](4608,sl.g,sl.g,[ol.c,ol.g]),L["\u0275mpd"](5120,sl.c,sl.j,[[3,sl.c]]),L["\u0275mpd"](4608,sl.m,sl.m,[ol.g]),L["\u0275mpd"](4608,sl.b,sl.b,[sl.g,sl.c,L.ComponentFactoryResolver,sl.m,L.ApplicationRef,L.Injector,L.NgZone]),L["\u0275mpd"](5120,sl.k,sl.l,[sl.b]),L["\u0275mpd"](4608,dl.f,dl.f,[G.a]),L["\u0275mpd"](4608,dl.e,dl.e,[dl.f,G.a,L.NgZone]),L["\u0275mpd"](5120,dl.j,dl.i,[[3,dl.j],[2,dl.g],G.a]),L["\u0275mpd"](5120,V.q,V.r,[sl.b]),L["\u0275mpd"](4608,V._12,V._12,[sl.b,L.Injector,V.q,[2,$.Location],[3,V._12]]),L["\u0275mpd"](4608,V._89,V._89,[sl.b,dl.j,L.Injector,[3,V._89]]),L["\u0275mpd"](5120,V.A,V.B,[sl.b]),L["\u0275mpd"](5120,V.x,V.y,[sl.b]),L["\u0275mpd"](4608,V._9,V._9,[]),L["\u0275mpd"](5120,V.m,V.n,[sl.b]),L["\u0275mpd"](4608,V.d,V._115,[[2,L.LOCALE_ID]]),L["\u0275mpd"](4608,ul.f,V.g,[]),L["\u0275mpd"](5120,V._121,V._122,[[3,V._121]]),L["\u0275mpd"](4608,$.DecimalPipe,$.DecimalPipe,[L.LOCALE_ID]),L["\u0275mpd"](4608,cl.a,cl.a,[]),L["\u0275mpd"](512,$.CommonModule,$.CommonModule,[]),L["\u0275mpd"](512,F.q,F.q,[]),L["\u0275mpd"](512,F.h,F.h,[]),L["\u0275mpd"](512,A.p,A.p,[[2,A.u],[2,A.l]]),L["\u0275mpd"](512,V.c,V.c,[]),L["\u0275mpd"](512,gn.a,gn.a,[]),L["\u0275mpd"](256,V.j,!0,[]),L["\u0275mpd"](512,V._4,V._4,[[2,ul.b],[2,V.j]]),L["\u0275mpd"](512,G.b,G.b,[]),L["\u0275mpd"](512,ol.b,ol.b,[]),L["\u0275mpd"](512,V._77,V._77,[]),L["\u0275mpd"](512,V._119,V._119,[]),L["\u0275mpd"](512,V.K,V.K,[]),L["\u0275mpd"](512,V._69,V._69,[]),L["\u0275mpd"](512,V._35,V._35,[]),L["\u0275mpd"](512,V._41,V._41,[]),L["\u0275mpd"](512,V._71,V._71,[]),L["\u0275mpd"](512,V._48,V._48,[]),L["\u0275mpd"](512,pl.a,pl.a,[]),L["\u0275mpd"](512,wn.q,wn.q,[]),L["\u0275mpd"](512,wn.f,wn.f,[]),L["\u0275mpd"](512,V.V,V.V,[]),L["\u0275mpd"](512,al.c,al.c,[]),L["\u0275mpd"](512,V._0,V._0,[]),L["\u0275mpd"](512,V._3,V._3,[]),L["\u0275mpd"](512,ml.e,ml.e,[]),L["\u0275mpd"](512,sl.d,sl.d,[]),L["\u0275mpd"](512,dl.a,dl.a,[]),L["\u0275mpd"](512,V._16,V._16,[]),L["\u0275mpd"](512,V._28,V._28,[]),L["\u0275mpd"](512,V._39,V._39,[]),L["\u0275mpd"](512,V._84,V._84,[]),L["\u0275mpd"](512,V._91,V._91,[]),L["\u0275mpd"](512,V._108,V._108,[]),L["\u0275mpd"](512,V._110,V._110,[]),L["\u0275mpd"](512,V._113,V._113,[]),L["\u0275mpd"](512,V._59,V._59,[]),L["\u0275mpd"](512,V._80,V._80,[]),L["\u0275mpd"](512,V._10,V._10,[]),L["\u0275mpd"](512,V._116,V._116,[]),L["\u0275mpd"](512,V._55,V._55,[]),L["\u0275mpd"](512,V._86,V._86,[]),L["\u0275mpd"](512,fl.n,fl.n,[]),L["\u0275mpd"](512,V._107,V._107,[]),L["\u0275mpd"](512,V.O,V.O,[]),L["\u0275mpd"](512,V._74,V._74,[]),L["\u0275mpd"](512,V._30,V._30,[]),L["\u0275mpd"](512,vl.MomentModule,vl.MomentModule,[]),L["\u0275mpd"](512,hl.SignaturePadModule,hl.SignaturePadModule,[]),L["\u0275mpd"](512,bl.a,bl.a,[]),L["\u0275mpd"](512,gl.a,gl.a,[]),L["\u0275mpd"](512,Rl,Rl,[]),L["\u0275mpd"](512,B,B,[]),L["\u0275mpd"](256,V.o,V.u,[]),L["\u0275mpd"](1024,A.j,function(){return[[{path:"",component:mn,children:[{path:"new",component:Cn},{path:":conversation",component:Hn,children:[{path:"participants",component:Yn,children:[{path:"add",component:ll}]}]}]}]]},[])])})}});